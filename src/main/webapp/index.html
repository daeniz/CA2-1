<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://code.jquery.com/jquery-3.1.0.js"></script>

        <link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>
        <script src="js/bootstrap.js" type="text/javascript"></script>
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <script src="js/scripts.js" type="text/javascript"></script>

        <script type="text/javascript">// <![CDATA[
            $(document).ready(function () {


                $("#searchterm").keyup(function (e) {
                    $("#results").html("");
                    var size = $("#searchterm").val().length;
                    if (size > 2) {
                        var q = $("#searchterm").val();
                        var request = $.ajax({
                            url: "api/person/search/" + q,
                            method: "GET",
                            dataType: "json"
                        });
                        request.done(function (data) {
                            var result = data;

                            //$("#results").append('<table class="table table-bordered">');
                            //$("#results").append('<thead> <tr> <th>#</th>   <th>First Name</th>   <th>Last Name</th>   </tr> </thead>');
                            //$("#results").append('<tbody>');
                            result.forEach(function (person) {
                                $("#results").append("<tr> <td>" + 
                                        person['id'] + "</td><td> " + 
                                        person['firstName'] + "</td><td>" + 
                                        person['lastName'] + "</td><td>"+ 
                                        person['email'] + "</td><td>" + 
                                        person['address']['street'] + "</td><td>" +
                                        person['address']['city'] + "</td><td>" +
                                        person['address']['zip'] + "</td>" +                                        
                                        "</tr>");
                            });
                            //$("#results").append('</tbody>');
                            //$("#results").append('</table>');
                        });
                        request.fail(function (jqXHR, textStatus) {
                            alert("request failed " + textStatus);
                        });
                    }
                });

            });
        </script>

    </head>
    <body>
        <nav class="navbar navbar-inverse">

            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">Directory</a>
                </div>
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li id="listpeople"><a href="#">List People</a></li>
                    <li id="listcompanies"><a href="#">List Companies</a></li>
                </ul>
            </div>
        </nav> 


        <div class="container">
            <input id="searchterm" type="text"/>
            <div class="row">
                <div class="col-sm-6">
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <td>ID</td>
                                <td>First Name</td>
                                <td>Last Name</td>
                                <td>Email</td>
                                <td>Street</td>
                                <td>City</td>
                                <td>Zip</td>
                                
                            </tr>
                        </thead>
                        <tbody id="results">
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </body>
</html>
